<!DOCTYPE html>
<html>

<head>
    <script src="keycloak.js"/>
    <script>
        alert('init 1');

    </script>

</head>

<body>
<h1>My First Heading</h1>

<script>
    alert('init 2');
    keycloak = new Keycloak();
    keycloak.init({ onLoad: 'login-required', promiseType: 'native' }).then(function(authenticated) {
        alert(authenticated ? 'authenticated' : 'not authenticated');
        if (authenticated) {
            document.getElementById("demo").innerHTML = "Logged in  " + keycloak.idTokenParsed.sub;
        }
    }).catch(function() {
        alert('failed to initialize');
    });

    function myFunction() {
        document.getElementById("demo").innerHTML = "Hello World";

    }
    function doLogin() {
        keycloak.login();

    }

</script>

<button onclick="doLogin()">Click me</button>


<p id="demo">My first paragraph.</p>

</body>
</html>
