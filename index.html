<!DOCTYPE html>
<html>

<head>
    <script src="keycloak.js"></script>
</head>

<body>
<h1>My First Heading</h1>
<script>
    console.log('init 2');
    keycloak = new Keycloak();
    keycloak.init({ promiseType: 'native', checkLoginIframe: false }).then(function(authenticated) {
        //alert(authenticated ? 'authenticated' : 'not authenticated');
        console.log("authenticated: " + authenticated);
        if (authenticated) {
            document.getElementById("demo").innerHTML = "Logged in  " + keycloak.idTokenParsed.sub;
        }
    }).catch(function() {
        alert('failed to initialize');
    });

    function myFunction() {
        document.getElementById("demo").innerHTML = "Hello World";

    }
    function doLogin() {
        keycloak.register();

    }

</script>

<button onclick="doLogin()">Click me</button>


<p id="demo">My first paragraph.</p>

</body>
</html>
